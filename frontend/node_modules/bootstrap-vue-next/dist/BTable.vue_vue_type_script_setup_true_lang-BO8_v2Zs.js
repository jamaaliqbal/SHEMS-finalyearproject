"use strict";const e=require("vue"),t=require("./object-B-6ddRYH.js"),l=require("./BTableSimple.vue_vue_type_script_setup_true_lang-BGc-Vbfw.js"),o=require("./useDefaults-Bq2idhQU.js"),a=require("./stringUtils-BBcOJJJC.js"),r=require("./useId-BOa4n5pr.js"),n=require("./index-BqHkgtNq.js"),s=(e,l,o)=>{const a=t.get(e,l);return o&&"function"==typeof o?o(a,l,e):a},d=e=>"object"==typeof e&&null!==e,i=e=>"object"==typeof e&&null!==e&&"key"in e,u=e.defineComponent({__name:"BTbody",props:{variant:{default:null}},setup(t){const l=t,a=o.useDefaults(l,"BTbody"),r=e.computed((()=>({[`thead-${a.variant}`]:null!==a.variant})));return(t,l)=>(e.openBlock(),e.createElementBlock("tbody",{class:e.normalizeClass(r.value)},[e.renderSlot(t.$slots,"default")],2))}}),c=["scope","colspan","rowspan","data-label"],f={key:0},v=e.defineComponent({__name:"BTd",props:{colspan:{default:void 0},rowspan:{default:void 0},stackedHeading:{default:void 0},stickyColumn:{type:Boolean,default:!1},variant:{default:null}},setup(t){const l=t,a=o.useDefaults(l,"BTd"),r=e.computed((()=>({[`table-${a.variant}`]:null!==a.variant,"b-table-sticky-column":a.stickyColumn,"table-b-table-default":a.stickyColumn&&null===a.variant}))),n=e.computed((()=>a.colspan?"colspan":a.rowspan?"rowspan":"col"));return(t,l)=>(e.openBlock(),e.createElementBlock("td",{scope:n.value,class:e.normalizeClass(r.value),colspan:e.unref(a).colspan,rowspan:e.unref(a).rowspan,"data-label":e.unref(a).stackedHeading},[e.unref(a).stackedHeading?(e.openBlock(),e.createElementBlock("div",f,[e.renderSlot(t.$slots,"default")])):e.renderSlot(t.$slots,"default",{key:1})],10,c))}}),p=e.defineComponent({__name:"BTfoot",props:{variant:{default:null}},setup(t){const l=t,a=o.useDefaults(l,"BTfoot"),r=e.computed((()=>({[`table-${a.variant}`]:null!==a.variant})));return(t,l)=>(e.openBlock(),e.createElementBlock("tfoot",{class:e.normalizeClass(r.value)},[e.renderSlot(t.$slots,"default")],2))}}),m=["scope","colspan","rowspan","data-label"],y={key:0},b=e.defineComponent({__name:"BTh",props:{colspan:{default:void 0},rowspan:{default:void 0},stackedHeading:{default:void 0},stickyColumn:{type:Boolean,default:!1},variant:{default:null}},setup(t){const l=t,a=o.useDefaults(l,"BTh"),r=e.computed((()=>({[`table-${a.variant}`]:null!==a.variant,"b-table-sticky-column":a.stickyColumn,"table-b-table-default":a.stickyColumn&&null===a.variant}))),n=e.computed((()=>a.colspan?"colspan":a.rowspan?"rowspan":"col"));return(t,l)=>(e.openBlock(),e.createElementBlock("th",{scope:n.value,class:e.normalizeClass(r.value),colspan:e.unref(a).colspan,rowspan:e.unref(a).rowspan,"data-label":e.unref(a).stackedHeading},[void 0!==e.unref(a).stackedHeading?(e.openBlock(),e.createElementBlock("div",y,[e.renderSlot(t.$slots,"default")])):e.renderSlot(t.$slots,"default",{key:1})],10,m))}}),k=e.defineComponent({__name:"BThead",props:{variant:{default:null}},setup(t){const l=t,a=o.useDefaults(l,"BThead"),r=e.computed((()=>({[`table-${a.variant}`]:null!==a.variant})));return(t,l)=>(e.openBlock(),e.createElementBlock("thead",{class:e.normalizeClass(r.value)},[e.renderSlot(t.$slots,"default")],2))}}),g=e.defineComponent({__name:"BTr",props:{variant:{default:null}},setup(t){const l=t,a=o.useDefaults(l,"BTr"),r=e.computed((()=>({[`table-${a.variant}`]:null!==a.variant})));return(t,l)=>(e.openBlock(),e.createElementBlock("tr",{class:e.normalizeClass(r.value)},[e.renderSlot(t.$slots,"default")],2))}}),w=e=>"string"==typeof e?a.titleCase(e):void 0!==e.label?e.label:"string"==typeof e.key?a.titleCase(e.key):e.key,h=Object.freeze(Object.keys({bordered:0,borderless:0,borderVariant:0,captionTop:0,dark:0,fixed:0,hover:0,id:0,noBorderCollapse:0,outlined:0,responsive:0,small:0,stacked:0,stickyHeader:0,striped:0,stripedColumns:0,variant:0,tableAttrs:0,tableClass:0})),C=Object.freeze(Object.keys({align:0,caption:0,detailsTdClass:0,fieldColumnClass:0,fields:0,footClone:0,footRowVariant:0,footVariant:0,headRowVariant:0,headVariant:0,items:0,labelStacked:0,modelValue:0,primaryKey:0,tbodyClass:0,tbodyTrAttrs:0,tbodyTrClass:0,tfootClass:0,tfootTrClass:0,theadClass:0,theadTrClass:0})),B=["TD","TH","TR"],S=["a","a *","button","button *","input:not(.disabled):not([disabled])","select:not(.disabled):not([disabled])","textarea:not(.disabled):not([disabled])",'[role="link"]','[role="link"] *','[role="button"]','[role="button"] *',"[tabindex]:not(.disabled):not([disabled])"].join(","),x=e=>{if(!e||!e.target)return!1;const t=e.target;if("disabled"in t&&t.disabled||-1!==B.indexOf(t.tagName))return!1;if(t.closest(".dropdown-menu"))return!0;const l="LABEL"===t.tagName?t:t.closest("label");if(l){const e=l.getAttribute("for"),t=e?document.getElementById(e):l.querySelector("input, select, textarea");if(t&&!t.disabled)return!0}return t.matches(S)},T={key:0,class:"b-table-stacked-label"},_={class:"d-inline-flex flex-nowrap align-items-center gap-1"},V={key:2},$=e.defineComponent({__name:"BTableLite",props:{align:{default:void 0},caption:{default:void 0},detailsTdClass:{default:void 0},fieldColumnClass:{type:[Function,String,Object,Array],default:void 0},fields:{default:()=>[]},footClone:{type:Boolean,default:!1},footRowVariant:{default:void 0},footVariant:{default:void 0},headRowVariant:{default:void 0},headVariant:{default:void 0},items:{default:()=>[]},labelStacked:{type:Boolean,default:!1},modelValue:{default:void 0},primaryKey:{default:void 0},tbodyClass:{default:void 0},tbodyTrAttrs:{type:[Function,Object],default:void 0},tbodyTrClass:{type:[Function,String,Array,Object],default:void 0},tfootClass:{default:void 0},tfootTrClass:{default:void 0},theadClass:{default:void 0},theadTrClass:{default:void 0},bordered:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},borderVariant:{default:void 0},captionTop:{type:Boolean,default:void 0},dark:{type:Boolean,default:void 0},fixed:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},id:{default:void 0},noBorderCollapse:{type:Boolean,default:void 0},outlined:{type:Boolean,default:void 0},responsive:{type:[Boolean,String],default:void 0},small:{type:Boolean,default:void 0},stacked:{type:[Boolean,String],default:void 0},stickyHeader:{type:[Boolean,String,Number],default:void 0},striped:{type:Boolean,default:void 0},stripedColumns:{type:Boolean,default:void 0},variant:{default:void 0},tableAttrs:{},tableClass:{default:void 0}},emits:["head-clicked","row-clicked","row-dblclicked","row-contextmenu","row-hovered","row-unhovered","row-middle-clicked"],setup(n,{emit:c}){const f=n,m=o.useDefaults(f,"BTableLite"),y=c,C=e.useSlots(),B=r.useId((()=>m.id)),S=e.ref(new WeakMap);e.watch((()=>m.items),(e=>{e.forEach((e=>{d(e)&&S.value.set(...(e=>[e,e._showDetails])(e))}))}),{deep:!0,immediate:!0});const $=e.computed((()=>[m.tableClass,{[`align-${m.align}`]:void 0!==m.align}])),P=e.computed((()=>{if(!m.fields.length&&m.items.length){const[e]=m.items;return d(e)||Array.isArray(e)?Object.keys(e).map((e=>{const t=a.startCase(e);return{key:e,label:t,tdAttr:!0===m.stacked?{"data-label":t}:void 0}})):[{key:"",_noHeader:!0}]}return m.fields.map((e=>{if(i(e))return{...e,tdAttr:!0===m.stacked?{"data-label":a.startCase(e.key),...e.tdAttr}:e.tdAttr};const t=a.startCase(e);return{key:e,label:t,tdAttr:!0===m.stacked?{"data-label":t}:void 0}}))})),N=e.computed((()=>P.value.length)),A=e.computed((()=>!(N.value>0&&P.value.every((e=>!0===e._noHeader))))),E=e.computed((()=>({variant:m.footVariant,class:m.tfootClass}))),R=(e,l,o)=>{const a=String(l.key),r=t.get(e,a);return l.thAttr&&"function"==typeof l.thAttr?l.thAttr(r,a,e,o):l.thAttr},F=(e,t,l=!1)=>{y("head-clicked",e.key,e,t,l)},D=e=>{if(d(e)){const t=S.value.get(e);S.value.set(e,!t),e._showDetails=!t}},j=e=>[e.class,e.thClass,{"b-table-sticky-column":e.stickyColumn},m.fieldColumnClass?"function"==typeof m.fieldColumnClass?m.fieldColumnClass(e):m.fieldColumnClass:null],I=(e,l)=>{var o,a;const r=t.get(l,String(e.key));return[e.class,"function"==typeof e.tdClass?e.tdClass(r,String(e.key),l):e.tdClass,d(l)&&(null==(o=l._cellVariants)?void 0:o[e.key])?`table-${null==(a=l._cellVariants)?void 0:a[e.key]}`:null,{"b-table-sticky-column":e.stickyColumn}]},M=(e,t)=>m.tbodyTrAttrs?"function"==typeof m.tbodyTrAttrs?m.tbodyTrAttrs(e,t):m.tbodyTrAttrs:null,z=(e,t)=>m.tbodyTrClass?"function"==typeof m.tbodyTrClass?m.tbodyTrClass(e,t):m.tbodyTrClass:null,O=e.computed((()=>({...t.pick(m,h),tableClass:$.value,id:B.value})));return(o,a)=>(e.openBlock(),e.createBlock(l._sfc_main,e.normalizeProps(e.guardReactiveProps(O.value)),{default:e.withCtx((()=>[e.withDirectives(e.createVNode(k,{variant:e.unref(m).headVariant,class:e.normalizeClass(e.unref(m).theadClass)},{default:e.withCtx((()=>[e.renderSlot(o.$slots,"thead-top",{columns:N.value,fields:P.value}),e.createVNode(g,{variant:e.unref(m).headRowVariant,class:e.normalizeClass(e.unref(m).theadTrClass)},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(P.value,(t=>(e.openBlock(),e.createBlock(b,e.mergeProps({key:t.key,scope:"col",class:j(t),title:t.headerTitle,variant:t.variant,abbr:t.headerAbbr,style:t.thStyle,ref_for:!0},R(null,t,"top"),{onClick:e=>F(t,e)}),{default:e.withCtx((()=>[e.renderSlot(o.$slots,C[`head(${String(t.key)})`]?`head(${String(t.key)})`:"head()",{label:t.label,column:t.key,field:t,isFoot:!1},(()=>[e.createTextVNode(e.toDisplayString(e.unref(w)(t)),1)]))])),_:2},1040,["class","title","variant","abbr","style","onClick"])))),128))])),_:3},8,["variant","class"]),C["thead-sub"]?(e.openBlock(),e.createBlock(g,{key:0},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(P.value,(t=>(e.openBlock(),e.createBlock(v,{key:t.key,scope:"col",variant:t.variant,class:e.normalizeClass([t.class,t.thClass])},{default:e.withCtx((()=>[e.renderSlot(o.$slots,"thead-sub",{items:e.unref(m).items,fields:P.value,field:t},(()=>[e.createTextVNode(e.toDisplayString(t.label),1)]))])),_:2},1032,["variant","class"])))),128))])),_:3})):e.createCommentVNode("",!0)])),_:3},8,["variant","class"]),[[e.vShow,A.value]]),e.createVNode(u,{class:e.normalizeClass(e.unref(m).tbodyClass)},{default:e.withCtx((()=>[e.renderSlot(o.$slots,"custom-body",{fields:P.value,items:e.unref(m).items,columns:N.value},(()=>[!e.unref(m).stacked&&C["top-row"]?(e.openBlock(),e.createBlock(g,e.mergeProps({key:0,class:z(null,"row-top")},M(null,"row-top")),{default:e.withCtx((()=>[e.renderSlot(o.$slots,"top-row",{columns:N.value,fields:P.value})])),_:3},16,["class"])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m).items,((l,a)=>{return e.openBlock(),e.createElementBlock(e.Fragment,{key:e.unref(m).primaryKey&&e.unref(t.get)(l,e.unref(m).primaryKey)?e.unref(t.get)(l,e.unref(m).primaryKey):a},[e.createVNode(g,e.mergeProps({id:e.unref(m).primaryKey&&e.unref(t.get)(l,e.unref(m).primaryKey)?(r=e.unref(t.get)(l,e.unref(m).primaryKey),`${B.value}__row_${r}`):void 0,class:z(l,"row"),variant:e.unref(d)(l)?l._rowVariant:void 0,ref_for:!0},M(l,"row"),{onClick:t=>!e.unref(x)(t)&&y("row-clicked",l,a,t),onDblclick:t=>!e.unref(x)(t)&&y("row-dblclicked",l,a,t),onContextmenu:t=>!e.unref(x)(t)&&y("row-contextmenu",l,a,t),onMouseenter:t=>!e.unref(x)(t)&&y("row-hovered",l,a,t),onMouseleave:t=>!e.unref(x)(t)&&y("row-unhovered",l,a,t),onMousedown:e=>((e,t,l)=>{1!==l.button||x(l)||y("row-middle-clicked",e,t,l)})(l,a,e)}),{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(P.value,(r=>{var n;return e.openBlock(),e.createBlock(v,e.mergeProps({key:r.key,variant:e.unref(d)(l)&&(null==(n=l._cellVariants)?void 0:n[r.key])?null:r.variant,class:I(r,l),ref_for:!0},((e,l,o)=>{const a=t.get(e,l);return o&&"function"==typeof o?o(a,l,e):o})(l,String(r.key),r.tdAttr)),{default:e.withCtx((()=>[e.unref(m).stacked&&e.unref(m).labelStacked?(e.openBlock(),e.createElementBlock("label",T,e.toDisplayString(e.unref(w)(r)),1)):e.createCommentVNode("",!0),e.renderSlot(o.$slots,C[`cell(${String(r.key)})`]?`cell(${String(r.key)})`:"cell()",{value:e.unref(s)(l,String(r.key),r.formatter),unformatted:e.unref(t.get)(l,String(r.key)),index:a,item:l,field:r,items:o.items,toggleDetails:()=>D(l),detailsShowing:!!e.unref(d)(l)&&(S.value.get(l)??!1)},(()=>[C[`cell(${String(r.key)})`]||C["cell()"]?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(e.unref(s)(l,String(r.key),r.formatter)),1)],64))]))])),_:2},1040,["variant","class"])})),128))])),_:2},1040,["id","class","variant","onClick","onDblclick","onContextmenu","onMouseenter","onMouseleave","onMousedown"]),e.unref(d)(l)&&!0===S.value.get(l)&&C["row-details"]?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(g,{"aria-hidden":"true",role:"presentation",class:"d-none"}),e.createVNode(g,e.mergeProps({class:z(l,"row-details"),variant:l._rowVariant,ref_for:!0},M(l,"row-details")),{default:e.withCtx((()=>[e.createVNode(v,{colspan:N.value,class:e.normalizeClass(o.detailsTdClass)},{default:e.withCtx((()=>[e.renderSlot(o.$slots,"row-details",{item:l,toggleDetails:()=>D(l),fields:P.value,index:a})])),_:2},1032,["colspan","class"])])),_:2},1040,["class","variant"])],64)):e.createCommentVNode("",!0)],64);var r})),128)),!e.unref(m).stacked&&C["bottom-row"]?(e.openBlock(),e.createBlock(g,e.mergeProps({key:1,class:["bottom-row",z(null,"row-bottom")]},M(null,"row-bottom")),{default:e.withCtx((()=>[e.renderSlot(o.$slots,"bottom-row",{columns:N.value,fields:P.value})])),_:3},16,["class"])):e.createCommentVNode("",!0)]))])),_:3},8,["class"]),e.unref(m).footClone?(e.openBlock(),e.createBlock(p,e.normalizeProps(e.mergeProps({key:0},E.value)),{default:e.withCtx((()=>[e.createVNode(g,{variant:e.unref(m).footRowVariant,class:e.normalizeClass(e.unref(m).tfootTrClass)},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(P.value,(t=>(e.openBlock(),e.createBlock(b,e.mergeProps({key:t.key,scope:"col",class:j(t),title:t.headerTitle,abbr:t.headerAbbr,style:t.thStyle,variant:t.variant,ref_for:!0},R(null,t,"bottom"),{onClick:e=>F(t,e,!0)}),{default:e.withCtx((()=>[e.createElementVNode("div",_,[e.createElementVNode("div",null,[e.renderSlot(o.$slots,C[`foot(${String(t.key)})`]?`foot(${String(t.key)})`:"foot()",{label:t.label,column:t.key,field:t,isFoot:!0},(()=>[e.createTextVNode(e.toDisplayString(e.unref(w)(t)),1)]))])])])),_:2},1040,["class","title","abbr","style","variant","onClick"])))),128))])),_:3},8,["variant","class"])])),_:3},16)):C["custom-foot"]?(e.openBlock(),e.createBlock(p,e.normalizeProps(e.mergeProps({key:1},E.value)),{default:e.withCtx((()=>[e.renderSlot(o.$slots,"custom-foot",{fields:P.value,items:e.unref(m).items,columns:N.value})])),_:3},16)):e.createCommentVNode("",!0),C["table-caption"]||e.unref(m).caption?(e.openBlock(),e.createElementBlock("caption",V,[e.renderSlot(o.$slots,"table-caption",{},(()=>[e.createTextVNode(e.toDisplayString(e.unref(m).caption),1)]))])):e.createCommentVNode("",!0)])),_:3},16))}}),P={style:{opacity:.4},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-up-short",viewBox:"0 0 16 16","aria-hidden":""},N={role:"alert","aria-live":"polite"},A={class:"text-center my-2"},E=e.defineComponent({__name:"BTable",props:e.mergeModels({provider:{default:void 0},noProvider:{default:void 0},noProviderPaging:{type:Boolean,default:!1},noProviderSorting:{type:Boolean,default:!1},noProviderFiltering:{type:Boolean,default:!1},mustSort:{type:[Boolean,Array],default:!1},selectable:{type:Boolean,default:!1},multisort:{type:Boolean,default:!1},stickySelect:{type:Boolean,default:!1},selectHead:{type:[Boolean,String],default:!0},selectMode:{default:"multi"},selectionVariant:{default:"primary"},busyLoadingText:{default:"Loading..."},perPage:{default:Number.POSITIVE_INFINITY},currentPage:{default:1},filter:{default:void 0},filterFunction:{type:Function,default:void 0},filterable:{default:void 0},noLocalSorting:{type:Boolean,default:!1},noSelectOnClick:{type:Boolean,default:!1},noSortableIcon:{type:Boolean,default:!1},emptyFilteredText:{default:"There are no records matching your request"},emptyText:{default:"There are no records to show"},showEmpty:{type:Boolean,default:!1},align:{default:void 0},caption:{default:void 0},detailsTdClass:{default:void 0},fieldColumnClass:{type:[Function,String,Object,Array],default:void 0},fields:{default:()=>[]},footClone:{type:Boolean,default:void 0},footRowVariant:{default:void 0},footVariant:{default:void 0},headRowVariant:{default:void 0},headVariant:{default:void 0},items:{default:()=>[]},labelStacked:{type:Boolean,default:void 0},modelValue:{default:void 0},primaryKey:{default:void 0},tbodyClass:{default:void 0},tbodyTrAttrs:{},tbodyTrClass:{type:[Function,String,Array,Object],default:void 0},tfootClass:{default:void 0},tfootTrClass:{default:void 0},theadClass:{default:void 0},theadTrClass:{default:void 0},bordered:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},borderVariant:{default:void 0},captionTop:{type:Boolean,default:void 0},dark:{type:Boolean,default:void 0},fixed:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},id:{default:void 0},noBorderCollapse:{type:Boolean,default:void 0},outlined:{type:Boolean,default:void 0},responsive:{type:[Boolean,String],default:void 0},small:{type:Boolean,default:void 0},stacked:{type:[Boolean,String],default:void 0},stickyHeader:{type:[Boolean,String,Number],default:void 0},striped:{type:Boolean,default:void 0},stripedColumns:{type:Boolean,default:void 0},variant:{default:void 0},tableAttrs:{}},{sortBy:{default:void 0},sortByModifiers:{},busy:{type:Boolean,default:!1},busyModifiers:{},selectedItems:{default:()=>[]},selectedItemsModifiers:{}}),emits:e.mergeModels(["filtered","head-clicked","row-clicked","row-dblclicked","row-contextmenu","row-hovered","row-unhovered","row-middle-clicked","row-selected","row-unselected","sorted","change"],["update:sortBy","update:busy","update:selectedItems"]),setup(l,{expose:u,emit:c}){const f=l,p=o.useDefaults(f,"BTable"),m=c,y=e.useSlots(),b=e.computed((()=>Object.keys(y).filter((e=>e.startsWith("cell("))))),k=e.computed((()=>Object.keys(y).filter((e=>e.startsWith("foot("))))),B=e.useModel(l,"sortBy"),S=e.useModel(l,"busy"),x=e.useModel(l,"selectedItems"),T=r.useId((()=>p.id)),_=e.computed({get:()=>new Set([...x.value]),set:e=>{x.value=[...e]}});e.watch(_,((e,t)=>{Array.from(t).filter((t=>!e.has(t))).forEach((e=>{m("row-unselected",e)})),Array.from(e).filter((e=>!t.has(e))).forEach((e=>{m("row-selected",e)}))}));const V={add:e=>{const t=new Set(_.value);t.add(e),_.value=t},clear:()=>{_.value.forEach((e=>{V.delete(e)}))},delete:e=>{const l=new Set(_.value);if(p.primaryKey){const o=p.primaryKey;x.value.forEach(((a,r)=>{const n=t.get(a,o),s=t.get(e,o);n&&s&&n===s&&l.delete(x.value[r])}))}else l.delete(e);_.value=l},set:e=>{_.value=new Set(e)},has:e=>{if(!p.primaryKey)return _.value.has(e);const l=p.primaryKey;for(const o of _.value){const a=t.get(o,l),r=t.get(e,l);if(a&&r&&a===r)return!0}return!1}},E=e.ref([]),R=n.useToNumber((()=>p.perPage),{method:"parseInt"}),F=n.useToNumber((()=>p.currentPage),{method:"parseInt"}),D=e.computed((()=>!!p.filter)),j=e.computed((()=>void 0!==p.provider)),I=e.computed((()=>_.value.size>0)),M=e.computed((()=>void 0!==B.value||p.fields.some((e=>"object"==typeof e&&null!==e&&!0===e.sortable)))),z=e.computed((()=>p.fields.map((e=>{var t;if(!i(e)){const t=a.startCase(e);return{key:e,label:t,tdAttr:!0===p.stacked?{"data-label":t}:void 0}}const l=null==(t=B.value)?void 0:t.find((t=>e.key===t.key)),o=!1===M.value?void 0:void 0===l?"none":"desc"===l.order?"descending":"asc"===l.order?"ascending":"none";return{...e,thAttr:{"aria-sort":o,...e.thAttr}}})))),O=e.computed((()=>({"b-table-busy":S.value,"b-table-selectable":p.selectable,"user-select-none":p.selectable&&I.value}))),L=e.computed((()=>[p.tbodyTrClass?"function"==typeof p.tbodyTrClass?p.tbodyTrClass(null,"table-busy"):p.tbodyTrClass:null])),K=e=>[{"b-table-sortable-column":M.value&&e.sortable}],H=(e,t)=>[{[`selected table-${p.selectionVariant}`]:p.selectable&&!!e&&V.has(e)},p.tbodyTrClass?"function"==typeof p.tbodyTrClass?p.tbodyTrClass(e,t):p.tbodyTrClass:null],q=e=>"function"==typeof e.sortByFormatted?e.sortByFormatted:e.formatter,W=e.computed((()=>{let e=j.value?E.value:p.items;return e=e.map((e=>{if("object"==typeof e&&null!==e&&Object.keys(e).some((e=>e.includes(".")))){let l={};for(const o in e)o.includes(".")?l=t.set(l,o,e[o]):l[o]=e[o];return l}return e})),(!0===D.value&&!j.value||!0===D.value&&j.value&&p.noProviderFiltering)&&(e=e.filter((e=>!d(e)||Object.entries(e).some((([t,l])=>{var o,a,r;return!(null==l||"_"===t[0]||!(null==(o=p.filterable)?void 0:o.includes(t))&&(null==(a=p.filterable)?void 0:a.length))&&(p.filterFunction&&"function"==typeof p.filterFunction?p.filterFunction(e,p.filter):(()=>{const o=z.value.find((e=>!!i(e)&&e.key===t));if(i(o)&&o.filterByFormatted){const t=q(o);if(t)return String(t(l,String(o.key),e))}return"object"==typeof l?JSON.stringify(Object.values(l)):l.toString()})().toLowerCase().includes((null==(r=p.filter)?void 0:r.toLowerCase())??""))}))))),(!0===M.value&&!j.value&&!p.noLocalSorting||!0===M.value&&j.value&&p.noProviderSorting)&&(e=(e=>{var l;const o=null==(l=B.value)?void 0:l.filter((e=>!!e.order));return o&&0!==o.length?[...e].sort(((e,l)=>{for(let a=0;a<(o.length??0);a++){const r=o[a],n=e=>{if(!d(e))return String(e);const l=z.value.find((e=>!!i(e)&&e.key===r.key)),o=t.get(e,r.key);if(i(l)&&l.sortByFormatted){const t=q(l);if(t)return String(s(e,String(l.key),t))}return"object"==typeof o&&null!==o?JSON.stringify(o):(null==o?void 0:o.toString())??""},u=n(e),c=n(l),f=r.comparer?r.comparer(u,c):u.localeCompare(c,void 0,{numeric:!0});if(0!==f)return"asc"===r.order?f:-f}return 0})):e})(e)),e})),Y=e.computed((()=>({emptyFilteredText:p.emptyFilteredText,emptyText:p.emptyText,fields:z.value,items:W.value}))),J=e.computed((()=>Number.isNaN(R.value)||j.value&&!p.noProviderPaging?W.value:W.value.slice((F.value-1)*(R.value||Number.POSITIVE_INFINITY),F.value*(R.value||Number.POSITIVE_INFINITY))));e.watch(J,(e=>{m("change",e)}));const U=(e,t,l)=>{!1===p.noSelectOnClick&&((e,t,l=!1,o=!1,a=!1)=>{if(p.selectable)if("single"===p.selectMode||"multi"===p.selectMode){if(l||o)return;V.has(e)?V.delete(e):"single"===p.selectMode?V.set([e]):V.add(e)}else if(o||a)V.has(e)?V.delete(e):V.add(e);else if(l){const e=[..._.value].pop(),l=W.value.findIndex((t=>t===e)),o=Math.min(l,t),a=Math.max(l,t),r=W.value.slice(o,a+1);V.set(r)}else V.set([e])})(e,t,l.shiftKey,l.ctrlKey,l.metaKey),m("row-clicked",e,t,l)},G=(e,t,l,o=!1)=>{m("head-clicked",e,t,l,o),(e=>{var t,l;if(!M.value)return;const o="object"==typeof e&&null!==e?e.key:e,a="object"==typeof e&&null!==e&&e.sortable;if(!0!==M.value||!0!==a)return;const r=e=>"asc"===e?"desc":void 0===e||!0===p.mustSort||Array.isArray(p.mustSort)&&p.mustSort.includes(o)?"asc":void 0,n=(null==(t=B.value)?void 0:t.findIndex((e=>e.key===o)))??-1,s=null==(l=B.value)?void 0:l[n],d=-1!==n&&s?{...s}:{key:o,order:"asc"};m("sorted",!0===p.multisort?(()=>{var e,t;let l=d;if(-1===n)B.value=[...B.value??[],d];else{const o=r(d.order);l={...d,order:o},B.value=o?null==(e=B.value)?void 0:e.map((e=>e.key===l.key?l:e)):null==(t=B.value)?void 0:t.filter((e=>e.key!==l.key))}return l})():(()=>{const e={...d,order:-1===n?d.order:r(d.order)};return B.value=[e],e})())})(t)},Q=async()=>{if(!j.value||void 0===p.provider||S.value)return;S.value=!0;const e=p.provider({currentPage:F.value,filter:p.filter,sortBy:B.value,perPage:R.value});try{const t=e instanceof Promise?await e:e;if(void 0===t)return;E.value=t}finally{S.value=!1}},X=async(e,t,l)=>{if(t===l)return;const o=e=>{var t;return!0===(null==(t=p.noProvider)?void 0:t.includes(e))},a=("currentPage"===e||"perPage"===e)&&(o("paging")||!0===p.noProviderPaging),r="filter"===e&&(o("filtering")||!0===p.noProviderFiltering),n=("sortBy"===e||"sortDesc"===e)&&(o("sorting")||!0===p.noProviderSorting);a||r||n||(!0===j.value&&await Q(),"currentPage"!==e&&"perPage"!==e&&m("filtered",[...W.value]))};e.watch((()=>p.filter),((e,t)=>{X("filter",e,t),e===t||j.value||e||m("filtered",[...W.value])})),e.watch(F,((e,t)=>{X("currentPage",e,t)})),e.watch(R,((e,t)=>{X("perPage",e,t)})),e.watch(B,((e,t)=>{X("sortBy",e,t)}),{deep:!0}),e.watch((()=>p.provider),(e=>{void 0!==e?Q():E.value=[]})),e.onMounted(Q);const Z={clearSelected:()=>{p.selectable&&V.clear()},selectAllRows:()=>{p.selectable&&"single"!==p.selectMode&&(_.value=new Set([...W.value]))},selectRow:e=>{if(!p.selectable)return;const t=W.value[e];t&&!V.has(t)&&("single"===p.selectMode?V.set([t]):V.add(t))},unselectRow:e=>{if(!p.selectable)return;const t=W.value[e];t&&V.has(t)&&V.delete(t)},isRowSelected:e=>{if(!p.selectable)return!1;const t=W.value[e];return V.has(t)}},ee=e.computed((()=>({...t.pick(p,[...C,...h]),tableAttrs:{ariaBusy:S.value},items:J.value,fields:z.value,tableClass:O.value,tbodyTrClass:H,fieldColumnClass:K,id:T.value})));return u({...Z,items:W,refresh:Q}),(t,l)=>(e.openBlock(),e.createBlock($,e.mergeProps(ee.value,{onHeadClicked:G,onRowClicked:U,onRowDblclicked:l[0]||(l[0]=(e,t,l)=>{m("row-dblclicked",e,t,l)}),onRowContextmenu:l[1]||(l[1]=(e,t,l)=>{m("row-contextmenu",e,t,l)}),onRowHovered:l[2]||(l[2]=(e,t,l)=>{m("row-hovered",e,t,l)}),onRowUnhovered:l[3]||(l[3]=(e,t,l)=>{m("row-unhovered",e,t,l)}),onRowMiddleClicked:l[4]||(l[4]=(e,t,l)=>{m("row-middle-clicked",e,t,l)})}),e.createSlots({"custom-body":e.withCtx((l=>[S.value&&y["table-busy"]?(e.openBlock(),e.createBlock(g,{key:0,class:e.normalizeClass(["b-table-busy-slot",L.value])},{default:e.withCtx((()=>[e.createVNode(v,{colspan:l.fields.length},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"table-busy")])),_:2},1032,["colspan"])])),_:2},1032,["class"])):!0===e.unref(p).showEmpty&&0===W.value.length?(e.openBlock(),e.createBlock(g,{key:1,class:"b-table-empty-row"},{default:e.withCtx((()=>[e.createVNode(v,{colspan:z.value.length},{default:e.withCtx((()=>[e.createElementVNode("div",N,[e.createElementVNode("div",A,[D.value?e.renderSlot(t.$slots,"empty-filtered",e.normalizeProps(e.mergeProps({key:0},Y.value)),(()=>[e.createTextVNode(e.toDisplayString(e.unref(p).emptyFilteredText),1)])):e.renderSlot(t.$slots,"empty",e.normalizeProps(e.mergeProps({key:1},Y.value)),(()=>[e.createTextVNode(e.toDisplayString(e.unref(p).emptyText),1)]))])])])),_:3},8,["colspan"])])),_:3})):e.createCommentVNode("",!0)])),_:2},[y["thead-top"]?{name:"thead-top",fn:e.withCtx((l=>[e.renderSlot(t.$slots,"thead-top",e.mergeProps(l,{clearSelected:Z.clearSelected,selectAllRows:Z.selectAllRows,fields:z.value}))])),key:"0"}:void 0,y["thead-sub"]?{name:"thead-sub",fn:e.withCtx((l=>[e.renderSlot(t.$slots,"thead-sub",e.mergeProps(l,{fields:z.value}))])),key:"1"}:void 0,y["top-row"]?{name:"top-row",fn:e.withCtx((l=>[e.renderSlot(t.$slots,"top-row",e.mergeProps(l,{fields:z.value}))])),key:"2"}:void 0,y["row-details"]?{name:"row-details",fn:e.withCtx((l=>[e.renderSlot(t.$slots,"row-details",e.mergeProps(l,{fields:z.value,selectRow:(e=l.index)=>Z.selectRow(e),unselectRow:(e=l.index)=>Z.unselectRow(e),rowSelected:Z.isRowSelected(l.index)}))])),key:"3"}:void 0,y["bottom-row"]?{name:"bottom-row",fn:e.withCtx((l=>[e.renderSlot(t.$slots,"bottom-row",e.mergeProps(l,{fields:z.value}))])),key:"4"}:void 0,y["custom-foot"]?{name:"custom-foot",fn:e.withCtx((l=>[e.renderSlot(t.$slots,"custom-foot",e.mergeProps(l,{fields:z.value}))])),key:"5"}:void 0,y["table-caption"]?{name:"table-caption",fn:e.withCtx((()=>[e.renderSlot(t.$slots,"table-caption")])),key:"6"}:void 0,e.renderList(b.value,(l=>({name:l,fn:e.withCtx((o=>[e.renderSlot(t.$slots,l,e.mergeProps(o,{selectRow:(e=o.index)=>Z.selectRow(e),unselectRow:(e=o.index)=>Z.unselectRow(e),rowSelected:Z.isRowSelected(o.index)}))]))}))),e.renderList(k.value,(l=>({name:l,fn:e.withCtx((o=>[e.renderSlot(t.$slots,l,e.mergeProps(o,{selectAllRows:Z.selectAllRows,clearSelected:Z.clearSelected}))]))}))),e.renderList(z.value,(o=>({name:`head(${String(o.key)})`,fn:e.withCtx((a=>{var r,n,s,d;return[e.renderSlot(t.$slots,y[`head(${String(o.key)})`]?`head(${String(o.key)})`:"head()",e.mergeProps(a,{selectAllRows:Z.selectAllRows,clearSelected:Z.clearSelected}),(()=>[e.createTextVNode(e.toDisplayString(e.unref(w)(o)),1)])),M.value&&a.field.sortable&&!1===e.unref(p).noSortableIcon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},["asc"===(null==(n=null==(r=B.value)?void 0:r.find((e=>e.key===a.field.key)))?void 0:n.order)?e.renderSlot(t.$slots,y[`sortAsc(${String(a.field.key)})`]?`sortAsc(${String(a.field.key)})`:"sortAsc()",e.normalizeProps(e.mergeProps({key:0},a)),(()=>[l[5]||(l[5]=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-up-short",viewBox:"0 0 16 16","aria-hidden":""},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z"})],-1))])):"desc"===(null==(d=null==(s=B.value)?void 0:s.find((e=>e.key===a.field.key)))?void 0:d.order)?e.renderSlot(t.$slots,y[`sortDesc(${String(a.field.key)})`]?`sortDesc(${String(a.field.key)})`:"sortDesc()",e.normalizeProps(e.mergeProps({key:1},a)),(()=>[l[6]||(l[6]=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16","aria-hidden":""},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4z"})],-1))])):e.renderSlot(t.$slots,y[`sortDefault(${String(a.field.key)})`]?`sortDefault(${String(a.field.key)})`:"sortDefault()",e.normalizeProps(e.mergeProps({key:2},a)),(()=>[(e.openBlock(),e.createElementBlock("svg",P,l[7]||(l[7]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z"},null,-1)])))]))],64)):e.createCommentVNode("",!0)]}))})))]),1040))}});exports._sfc_main=E,exports._sfc_main$1=$,exports._sfc_main$2=u,exports._sfc_main$3=v,exports._sfc_main$4=p,exports._sfc_main$5=b,exports._sfc_main$6=k,exports._sfc_main$7=g;
//# sourceMappingURL=BTable.vue_vue_type_script_setup_true_lang-BO8_v2Zs.js.map
