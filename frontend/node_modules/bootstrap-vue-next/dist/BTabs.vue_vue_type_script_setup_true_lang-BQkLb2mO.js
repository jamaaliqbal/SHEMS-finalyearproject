"use strict";const e=require("vue"),a=require("./useId-BOa4n5pr.js"),l=require("./useDefaults-Bq2idhQU.js"),t=require("./keys-C2BcfuxJ.js"),i=require("./classes-CXBJXuVd.js"),n=require("./useAlignment-BTUJZ_9x.js"),o=require("./index-CNL2tI0w.js"),d=e.defineComponent({inheritAttrs:!1,__name:"BTab",props:e.mergeModels({buttonId:{default:void 0},disabled:{type:Boolean,default:!1},id:{default:void 0},lazy:{type:Boolean,default:void 0},lazyOnce:{type:Boolean,default:void 0},noBody:{type:Boolean,default:!1},tag:{default:"div"},title:{default:void 0},titleItemClass:{default:void 0},titleLinkAttrs:{default:void 0},titleLinkClass:{default:void 0}},{active:{type:Boolean,default:!1},activeModifiers:{}}),emits:["update:active"],setup(i){const n=i,o=l.useDefaults(n,"BTab"),d=e.useSlots(),u=e.useModel(i,"active"),s=e.inject(t.tabsInjectionKey,null),v=a.useId((()=>o.id),"tabpane"),r=a.useId((()=>o.buttonId),"tab"),c=e.ref(!1),f=e.useTemplateRef("_el"),{onClick:m,...p}=e.useAttrs(),b=e.computed((()=>({id:v.value,buttonId:r.value,disabled:o.disabled,title:o.title,titleComponent:d.title,titleItemClass:()=>o.titleItemClass,titleLinkAttrs:()=>o.titleLinkAttrs,titleLinkClass:()=>o.titleLinkClass,onClick:m,el:f.value})));e.onMounted((()=>{s&&(s.registerTab(b),u.value&&s.activateTab(v.value))})),e.onUnmounted((()=>{s&&s.unregisterTab(v.value)}));const y=e.computed((()=>(null==s?void 0:s.activeId.value)===v.value)),C=e.ref(y.value),h=e.computed((()=>!(!(null==s?void 0:s.lazy.value)&&!(o.lazyOnce??o.lazy)))),k=e.computed((()=>void 0!==o.lazyOnce)),B=e.computed((()=>y.value&&!o.disabled)),I=e.computed((()=>B.value||!h.value||h.value&&k.value&&c.value));e.watch(y,(e=>{if(e)return u.value=!0,void setTimeout((()=>{C.value=!0}),0);C.value=!1,u.value=!1})),e.watch(u,(e=>{s&&(e?s.activateTab(v.value):y.value&&s.activateTab(void 0))}));const w=e.computed((()=>[{active:y.value,show:C.value,"card-body":(null==s?void 0:s.card.value)&&!1===o.noBody,fade:!(null==s?void 0:s.noFade.value)},C.value?null==s?void 0:s.activeTabClass.value:null==s?void 0:s.inactiveTabClass.value,null==s?void 0:s.tabClass.value]));return e.watch(I,(e=>{e&&!c.value&&(c.value=!0)})),(a,l)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(o).tag),e.mergeProps({id:e.unref(v),ref:"_el",class:["tab-pane",w.value],role:"tabpanel","aria-labelledby":e.unref(r)},p),{default:e.withCtx((()=>[I.value?e.renderSlot(a.$slots,"default",{key:0}):e.createCommentVNode("",!0)])),_:3},16,["id","class","aria-labelledby"]))}}),u=["aria-orientation"],s=["id","aria-controls","aria-selected","tabindex","onClick"],v=e.defineComponent({__name:"BTabs",props:e.mergeModels({activeNavItemClass:{default:void 0},activeTabClass:{default:void 0},align:{default:void 0},card:{type:Boolean,default:!1},contentClass:{default:void 0},end:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},id:{default:void 0},inactiveNavItemClass:{default:void 0},inactiveTabClass:{default:void 0},justified:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},navClass:{default:void 0},navItemClass:{default:void 0},navWrapperClass:{default:void 0},noFade:{type:Boolean,default:!1},noKeyNav:{type:Boolean,default:!1},noNavStyle:{type:Boolean,default:!1},pills:{type:Boolean,default:!1},small:{type:Boolean,default:!1},tag:{default:"div"},tabClass:{default:void 0},underline:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1}},{modelValue:{default:-1},modelModifiers:{},activeId:{default:void 0},activeIdModifiers:{}}),emits:e.mergeModels(["activate-tab","click"],["update:modelValue","update:activeId"]),setup(a,{emit:d}){const v=a,r=l.useDefaults(v,"BTabs"),c=d,f=e.useModel(a,"modelValue"),m=e.useModel(a,"activeId"),p=o.createReusableTemplate(),b=e.ref([]),y=e.computed((()=>b.value.map((a=>{const l=e.unref(a),t=l.id===m.value;return{...l,active:t,navItemClasses:[{active:t,disabled:l.disabled},t?r.activeNavItemClass:r.inactiveNavItemClass,r.navItemClass]}})))),C=e.computed((()=>!((null==y?void 0:y.value)&&y.value.length>0))),h=e.computed((()=>({"d-flex":r.vertical,"align-items-start":r.vertical}))),k=n.useAlignment((()=>r.align)),B=e.computed((()=>({"nav-pills":r.pills,"nav-underline":r.underline,"flex-column me-3":r.vertical,[k.value]:void 0!==r.align,"nav-fill":r.fill,"card-header-tabs":r.card&&!r.pills&&!r.underline,"card-header-pills":r.card&&r.pills,"nav-justified":r.justified,"nav-tabs":!r.noNavStyle&&!r.pills&&!r.underline,small:r.small}))),I=e=>{var a;if(void 0!==e){const l=null==(a=y.value[e])?void 0:a.id;if(e>-1&&e<y.value.length&&!y.value[e].disabled&&(f.value<0||m.value!==l||f.value!==e)){const a=new i.BvEvent("activate-tab",{cancelable:!0});c("activate-tab",e,f.value,a),a.defaultPrevented||(m.value!==l&&(m.value=l),f.value!==e&&(f.value=e))}}},w=(e,a)=>{var l,t;y.value.length<=0||r.noKeyNav||(e.preventDefault(),e.stopPropagation(),f.value=g(f.value+a,a),null==(t=document.getElementById(null==(l=y.value[f.value])?void 0:l.buttonId))||t.focus())},g=(e,a)=>{let l=e,t=-1,i=-1;for(let n=0;n<y.value.length;n++)y.value[n].disabled||(-1===t&&(t=n),i=n);for(;l>=t&&l<=i&&y.value[l].disabled;)l+=a;return l<t&&(l=t),l>i&&(l=i),l};e.watch(f,((a,l)=>{if(a===l)return;if(y.value.length<=0)return;const t=g(a,a>l?1:-1);e.nextTick((()=>{I(t)}))})),e.watch(m,((e,a)=>{const l=y.value.findIndex((a=>a.id===e));e!==a&&(y.value.length<=0||I(-1!==l?l:g(0,1)))}));e.watch(b,(()=>{T()}),{deep:!0});const T=()=>{var e;if(0===y.value.length)return f.value=-1,void(m.value=void 0);f.value>=0&&!m.value&&(m.value=null==(e=y.value[f.value])?void 0:e.id),y.value.find((e=>e.id===m.value))?I(y.value.findIndex((e=>e.id===m.value))):I(y.value.map((e=>!e.disabled)).indexOf(!0))};return e.provide(t.tabsInjectionKey,{lazy:e.toRef((()=>r.lazy)),card:e.toRef((()=>r.card)),noFade:e.toRef((()=>r.noFade)),activeTabClass:e.toRef((()=>r.activeTabClass)),inactiveTabClass:e.toRef((()=>r.inactiveTabClass)),tabClass:e.toRef((()=>r.tabClass)),registerTab:e=>{b.value.find((a=>a.value.id===e.value.id))?b.value[b.value.findIndex((a=>a.value.id===e.value.id))]=e:b.value.push(e),b.value.sort(((e,a)=>{if(!Node||!e.value.el||!a.value.el)return 0;const l=e.value.el.compareDocumentPosition(a.value.el);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0}))},unregisterTab:e=>{b.value=b.value.filter((a=>a.value.id!==e))},activeId:m,activateTab:e=>{const a=y.value.findIndex((a=>a.id===e));I(void 0!==e&&-1!==a?a:g(0,1))}}),(a,l)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).tag),{id:e.unref(r).id,class:e.normalizeClass(["tabs",h.value])},{default:e.withCtx((()=>[e.createVNode(e.unref(p).define,null,{default:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass(["tab-content",e.unref(r).contentClass])},[e.renderSlot(a.$slots,"default"),C.value?(e.openBlock(),e.createElementBlock("div",{key:"bv-empty-tab",class:e.normalizeClass(["tab-pane active",{"card-body":e.unref(r).card}])},[e.renderSlot(a.$slots,"empty")],2)):e.createCommentVNode("",!0)],2)])),_:3}),e.unref(r).end?(e.openBlock(),e.createBlock(e.unref(p).reuse,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([e.unref(r).navWrapperClass,{"card-header":e.unref(r).card,"ms-auto":a.vertical&&e.unref(r).end}])},[e.createElementVNode("ul",{class:e.normalizeClass(["nav",[B.value,e.unref(r).navClass]]),role:"tablist","aria-orientation":e.unref(r).vertical?"vertical":"horizontal"},[e.renderSlot(a.$slots,"tabs-start"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,((a,t)=>{var i,n,o;return e.openBlock(),e.createElementBlock("li",{key:a.id,class:e.normalizeClass(["nav-item",null==(i=a.titleItemClass)?void 0:i.call(a)]),role:"presentation"},[e.createElementVNode("button",e.mergeProps({id:a.buttonId,class:["nav-link",[a.navItemClasses,null==(n=a.titleLinkClass)?void 0:n.call(a)]],role:"tab","aria-controls":a.id,"aria-selected":a.active,tabindex:e.unref(r).noKeyNav||a.active?void 0:-1,ref_for:!0},null==(o=a.titleLinkAttrs)?void 0:o.call(a),{onKeydown:[l[0]||(l[0]=e.withKeys(e.withModifiers((a=>!e.unref(r).vertical&&w(a,-1)),["exact"]),["left"])),l[1]||(l[1]=e.withKeys(e.withModifiers((a=>!e.unref(r).vertical&&w(a,-999)),["shift"]),["left"])),l[2]||(l[2]=e.withKeys(e.withModifiers((a=>e.unref(r).vertical&&w(a,-1)),["exact"]),["up"])),l[3]||(l[3]=e.withKeys(e.withModifiers((a=>e.unref(r).vertical&&w(a,-999)),["shift"]),["up"])),l[4]||(l[4]=e.withKeys(e.withModifiers((a=>!e.unref(r).vertical&&w(a,1)),["exact"]),["right"])),l[5]||(l[5]=e.withKeys(e.withModifiers((a=>!e.unref(r).vertical&&w(a,999)),["shift"]),["right"])),l[6]||(l[6]=e.withKeys(e.withModifiers((a=>e.unref(r).vertical&&w(a,1)),["exact"]),["down"])),l[7]||(l[7]=e.withKeys(e.withModifiers((a=>e.unref(r).vertical&&w(a,999)),["shift"]),["down"])),l[8]||(l[8]=e.withKeys((e=>w(e,-999)),["page-up"])),l[9]||(l[9]=e.withKeys((e=>w(e,999)),["page-down"])),l[10]||(l[10]=e.withKeys((e=>w(e,-999)),["home"])),l[11]||(l[11]=e.withKeys((e=>w(e,999)),["end"]))],onClick:e.withModifiers((e=>((e,a)=>{var l,t,i;I(a),a>=0&&!y.value[a].disabled&&(null==(l=y.value[a])?void 0:l.onClick)&&"function"==typeof y.value[a].onClick&&(null==(i=(t=y.value[a]).onClick)||i.call(t,e))})(e,t)),["stop","prevent"])}),[a.titleComponent?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a.titleComponent),{key:0})):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(a.title),1)],64))],16,s)],2)})),128)),e.renderSlot(a.$slots,"tabs-end")],10,u)],2),e.unref(r).end?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(p).reuse,{key:1}))])),_:3},8,["id","class"]))}});exports._sfc_main=d,exports._sfc_main$1=v;
//# sourceMappingURL=BTabs.vue_vue_type_script_setup_true_lang-BQkLb2mO.js.map
